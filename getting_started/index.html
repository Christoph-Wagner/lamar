<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta name="generator" content="Bootply" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <title>Lamar - Getting Started</title>
        <link href="/lamar/content/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <link href="/lamar/content/prism.css" rel="stylesheet" type="text/css" />
        <link href="/lamar/content/theme.css" rel="stylesheet" type="text/css" />

        <link rel="apple-touch-icon" href="/bootstrap/img/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/bootstrap/img/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/bootstrap/img/apple-touch-icon-114x114.png">

        <link href="/lamar/content/affix.css" rel="stylesheet" type="text/css" />
    </head>

    <body>

      <a href="https://github.com/jasperfx/Lamar"><img style="z-index: 5000; position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>

      <nav class="navbar navbar-default navbar-fixed-top" role="banner">
      <div class="container">
        <div class="navbar-header">
          <a href="/lamar" class="navbar-brand">Lamar</a>
        </div>
        <nav class="collapse navbar-collapse" role="navigation">
          <ul class="nav navbar-nav pull-right">
            <li>
              <a href="/lamar/getting_started">Getting Started</a>
            </li>
            <li>
              <a href="/lamar/documentation">Documentation</a>
            </li>
            <li>
              <a href="https://gitter.im/jasperfx/Lamar?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/jasperfx/Lamar" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg" style="max-width:100%;"></a>
            </li>
            <li><a href="/lamar/" title="Lamar">Previous</a></li>
            <li><a href="/lamar/documentation" title="Documentation">Next</a></li>
          </ul>
          <div class="navbar-form navbar-left" role="search">
            <div class="form-group">
              <input id="search" type="search" class="form-control" placeholder="Search">
            </div>
          </div>

        </nav>

      </div>
    </nav>

    <div class="container">
      <nav class="navbar-inverse">
        <ol class="breadcrumb"><li><a href="/lamar/">Lamar</a></li><li class="active">Getting Started</li></ol>
      </nav>
    </div>

    <!--main-->
    <div class="container">
      <div class="row">
          <!--left-->
          <div class="col-md-3" id="leftCol">
            <h3>Lamar 4.3.0</h3>
            <br />

            <ul class="nav nav-stacked affix" id="sidebar">
            </ul>

            <h3 class="no-margin">Next</h3><p><a href="/lamar/documentation">Documentation</a></p>
            <h3 class="no-margin">Previous</h3><a href="/lamar/">Lamar</a></p>
          </div><!--/left-->

          <!--right-->
          <div class="col-md-9">
              <h1>Getting Started</h1>

              <hr />

              <div id="main-pane">
                <!--Title:Getting Started-->
<!--Url:getting_started-->
<p>This page does assume that you are already familiar with IoC containers. For more background on the concepts
and usage of an IoC container within your application, see <a href="/lamar/documentation/ioc/concepts">Software Design Concepts</a></p>
<p>Lamar is a .Net library that provides two pieces of functionality:</p>
<ol>
<li>A fast <a href="https://www.martinfowler.com/articles/injection.html">Inversion of Control Container</a> that natively supports the <a href="https://code.msdn.microsoft.com/Dependency-injection-in-f789ceaa">ASP.Net Core DI abstractions</a> and a subset of the older <a href="https://structuremap.github.io">StructureMap library</a></li>
<li>The dynamic code generation and compilation features used underneath the IoC implementation</li>
</ol>
<h2 id="lamar-as-ioc-container">Lamar as IoC Container</h2>
<p>To get started, just add <a href="https://www.nuget.org/packages/Lamar/">Lamar</a> to your project through Nuget.</p>
<p>Most of the time you use an IoC container these days, it's probably mostly hidden inside of some kind of application framework. However, if you wanted to use Lamar all by itself you would first <a href="/lamar/documentation/ioc/bootstrapping">bootstrap a Lamar container</a> with all its service registrations something like this:</p>
<pre><code class="language-csharp">&#xA;var container = new Container(x =&gt;&#xA;{&#xA;    // Using StructureMap style registrations&#xA;    x.For&lt;IClock&gt;().Use&lt;Clock&gt;();&#xA;    &#xA;    // Using ASP.Net Core DI style registrations&#xA;    x.AddTransient&lt;IClock, Clock&gt;();&#xA;    &#xA;    // and lots more services in all likelihood&#xA;});&#xA;</code></pre>
<p>Now, to resolve services from your container:</p>
<pre><code class="language-csharp">&#xA;// StructureMap style&#xA;&#xA;// Get a required service&#xA;var clock = container.GetInstance&lt;IClock&gt;();&#xA;&#xA;// Try to resolve a service if it&#x27;s registered&#xA;var service = container.TryGetInstance&lt;IService&gt;();&#xA;&#xA;// ASP.Net Core style&#xA;var provider = (IServiceProvider)container;&#xA;&#xA;// Get a required service&#xA;var clock2 = provider.GetRequiredService&lt;IClock&gt;();&#xA;&#xA;// Try to resolve a service if it&#x27;s registered&#xA;var service2 = provider.GetService&lt;IService&gt;();&#xA;</code></pre>
<p>Definitely note that the old StructureMap style of service resolution is semantically different than ASP.Net Core's DI resolution methods. That's been the cause of much user aggravation over the years.</p>
<h2 id="lamar-within-asp.net-core-applications">Lamar within ASP.Net Core Applications</h2>
<p>To use Lamar within ASP.Net Core applications, also install the <a href="https://www.nuget.org/packages/Lamar.Microsoft.DependencyInjection/">Lamar.Microsoft.DependencyInjection</a> library from Nuget to your ASP.Net Core project (and you can thank Microsoft for the clumsy naming convention, thank you).</p>
<p>With that Nuget installed, your normal ASP.Net Core bootstrapping changes just slightly. When you bootstrap your <code>IWebHostBuilder</code> object
that configures ASP.Net Core, you also need to call the <code>UseLamar()</code> method as shown below:</p>
<pre><code class="language-csharp">&#xA;public static void Main(string[] args)&#xA;{&#xA;    var builder = new WebHostBuilder();&#xA;    builder&#xA;        // Replaces the built in DI container&#xA;        // with Lamar&#xA;        .UseLamar()&#xA;        &#xA;        // Normal ASP.Net Core bootstrapping&#xA;        .UseUrls(&quot;http://localhost:5002&quot;)&#xA;        .UseKestrel()&#xA;        .UseStartup&lt;Startup&gt;();&#xA;&#xA;    builder.Start();&#xA;&#xA;}&#xA;</code></pre>
<p>If you use a <code>StartUp</code> class for extra configuration, your <code>ConfigureContainer()</code> method <em>can</em> take in a <code>ServiceRegistry</code> object from Lamar for service registrations in place of the ASP.Net Core <code>IServiceCollection</code> interface as shown below:</p>
<pre><code class="language-csharp">&#xA;public class Startup&#xA;{&#xA;    // Take in Lamar&#x27;s ServiceRegistry instead of IServiceCollection&#xA;    // as your argument, but fear not, it implements IServiceCollection&#xA;    // as well&#xA;    public void ConfigureContainer(ServiceRegistry services)&#xA;    {&#xA;        // Supports ASP.Net Core DI abstractions&#xA;        services.AddMvc();&#xA;        services.AddLogging();&#xA;        &#xA;        // Also exposes Lamar specific registrations&#xA;        // and functionality&#xA;        services.Scan(s =&gt;&#xA;        {&#xA;            s.TheCallingAssembly();&#xA;            s.WithDefaultConventions();&#xA;        });&#xA;    }&#xA;&#xA;    public void Configure(IApplicationBuilder app)&#xA;    {&#xA;        app.UseMvc();&#xA;    }&#xA;}&#xA;</code></pre>
<p>You can also still write <code>ConfigureServices(IServiceCollection)</code>, but you'd miss out on most of Lamar's extra functionality beyond what that abstraction
provides.</p>
<p>And that is that, you're ready to run your ASP.Net Core application with Lamar handling service resolution and object cleanup during your
HTTP requests.</p>
<h2 id="lamar-for-runtime-code-generation-compilation">Lamar for Runtime Code Generation &amp; Compilation</h2>
<p>Please see <a href="/lamar/documentation/compilation">LamarCodeGeneration &amp; LamarCompiler</a> for more information.</p>

              </div>

              <hr />

              <nav>
                <span>
                  <strong>Previous: </strong><a href="/lamar/">Lamar</a>

                </span>
                <span class="pull-right">

                  <strong>Next: </strong><a href="/lamar/documentation">Documentation</a>

                </span>
              </nav>

          </div><!--/right-->
        </div><!--/row-->
      </div><!--/container-->

    </body>


    <footer>
        <script type='text/javascript' src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type='text/javascript' src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

        <script type="text/javascript" src="/lamar/content/prism.js"></script>
        <script type="text/javascript" src="/lamar/content/sidebar.js"></script>
        <script type="text/javascript" src="/lamar/content/affix.js"></script>

<script>
$('#search').keyup(function(e){
  if(e.keyCode == 13) {
    var search = $('#search').val();

    var url = 'https://www.google.com/#q=site:jasperfx.github.io ' + search;
    url = encodeURI(url);

    window.location.href = url;

    e.stopPropagation();
    if (e.cancelBubble!=null) e.cancelBubble = true;
    return false;
  }
});
</script>
    </footer>
</html>
